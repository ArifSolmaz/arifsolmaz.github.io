name: Test Tweet Format (DELETE ME)

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - run: pip install requests tweepy pillow
      - name: Show new tweet format
        run: |
          echo "=== Testing new tweet format ==="
          python -c "
          import json
          with open('arxiv/data/papers.json') as f:
              data = json.load(f)
          paper = data['papers'][0]
          authors = paper.get('authors', [])
          author_str = authors[0] + ' et al.' if len(authors) > 1 else (authors[0] if authors else 'Unknown')
          hook = paper.get('tweet_hook', {}).get('hook', '')
          question = paper.get('tweet_hook', {}).get('question', '')
          title = paper['title']
          print()
          if hook: print(hook); print()
          print('ðŸ“„ ' + title)
          print('ðŸ‘¤ ' + author_str)
          if question: print(); print(question)
          print()
          "
