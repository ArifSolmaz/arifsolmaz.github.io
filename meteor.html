<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteorit Enerji Hesaplayıcı</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input {
            padding: 8px;
            width: 200px;
            font-size: 16px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #0056b3;
        }
        #output, #question-reference {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Meteorit Enerji Hesaplayıcı</h1>
    <div id="question-reference">
        <h2>Soru Referansı</h2>
        <p>10 Ağustos 1972'de, büyük bir meteorit batı Amerika Birleşik Devletleri ve Kanada üzerinde atmosferde su üzerinde zıplayan bir taş gibi sekti. Eşlik eden ateş topu o kadar parlaktı ki gündüz gökyüzünde görülebiliyordu ve normal meteor izinden daha parlaktı. Meteoritin kütlesi yaklaşık 4 × 10⁴ kg idi; hızı yaklaşık 15 km/s idi. Eğer atmosferi dikey olarak girseydi ve aynı hızda Dünya yüzeyine çarpsaydı, (a) Meteoritin kinetik enerji kaybını (joule cinsinden) hesaplayın. (b) Bu enerji kaybını, 1 megaton TNT'nin patlayıcı enerjisi (4.2 × 10¹⁵ J) cinsinden ifade edin. (c) Hiroşima'daki atom bombasının patlaması 13 kiloton TNT'ye eşitti. Meteorit çarpışması kaç Hiroşima bombasına denk olurdu?</p>
    </div>
    <div class="form-group">
        <label for="mass">Meteoritin Kütlesi (kg):</label>
        <input type="number" id="mass" value="40000" step="any">
    </div>
    <div class="form-group">
        <label for="velocity">Meteoritin Hızı (m/s):</label>
        <input type="number" id="velocity" value="15000" step="any">
    </div>
    <button onclick="calculate()">Hesapla</button>
    <div id="output"></div>

    <script>
        let pyodide;

        async function initializePyodide() {
            pyodide = await loadPyodide();
            await pyodide.loadPackage("micropip");
            await pyodide.runPythonAsync(`
                async def calculate_energy(mass, velocity):
                    tnt_megaton_energy = 4.2e15
                    hiroshima_energy = 13.0

                    delta_k = -0.5 * float(mass) * (float(velocity) ** 2)
                    abs_delta_k = abs(delta_k)

                    energy_loss_megatons = abs_delta_k / tnt_megaton_energy
                    energy_loss_kilotons = energy_loss_megatons * 1000
                    equivalent_bombs = energy_loss_kilotons / hiroshima_energy

                    return {"delta_k": abs_delta_k, "energy_loss_megatons": energy_loss_megatons, "equivalent_bombs": equivalent_bombs}
            `);
        }

        async function calculate() {
            const mass = parseFloat(document.getElementById("mass").value);
            const velocity = parseFloat(document.getElementById("velocity").value);

            if (isNaN(mass) || isNaN(velocity) || mass <= 0 || velocity <= 0) {
                document.getElementById("output").innerHTML = "<p style='color: red;'>Lütfen geçerli ve pozitif bir kütle ve hız girin!</p>";
                return;
            }

            try {
                const result = await pyodide.globals.get("calculate_energy")(mass, velocity);

                if (!result || typeof result !== "object" || !("delta_k" in result)) {
                    throw new Error("Hesaplama sonucu beklenen formatta değil.");
                }

                document.getElementById("output").innerHTML = `
                    <h2>Sonuçlar:</h2>
                    <p>(a) Kinetik enerji kaybı: ${result.delta_k.toExponential(2)} J</p>
                    <p>(b) Enerji kaybı: ${result.energy_loss_megatons.toFixed(2)} megaton TNT</p>
                    <p>(c) Hiroşima bombalarına denklik: ${result.equivalent_bombs.toFixed(2)} bomba</p>
                `;
            } catch (error) {
                document.getElementById("output").innerHTML = `<p style='color: red;'>Hesaplama sırasında bir hata oluştu: ${error.message}</p>`;
                console.error("Hata detayı:", error); // Hata detayını konsola yaz
            }
        }

        initializePyodide();
    </script>
</body>
</html>